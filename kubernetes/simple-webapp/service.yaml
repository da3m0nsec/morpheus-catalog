apiVersion: v1
kind: Service
metadata:
  name: webapp-service
  namespace: simple-webapp
  labels:
    app: webapp
  annotations:
    # Cloud provider specific annotations (uncomment as needed)
    # AWS
    # service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
    # Azure
    # service.beta.kubernetes.io/azure-load-balancer-internal: "false"
    # GCP
    # cloud.google.com/load-balancer-type: "External"
spec:
  type: LoadBalancer

  # Session affinity (optional)
  # sessionAffinity: ClientIP
  # sessionAffinityConfig:
  #   clientIP:
  #     timeoutSeconds: 10800

  ports:
  - name: http
    port: 80
    targetPort: 80
    protocol: TCP
    # For NodePort, uncomment and specify port (30000-32767)
    # nodePort: 30080

  selector:
    app: webapp

  # External Traffic Policy
  # - Cluster: Traffic is routed to all pods (default)
  # - Local: Traffic is routed to pods on same node (preserves source IP)
  externalTrafficPolicy: Cluster
